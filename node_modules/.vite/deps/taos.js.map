{
  "version": 3,
  "sources": ["webpack:///src/js/taos.js"],
  "sourcesContent": ["(function() {\n  const debounce = (fn, delay) => {\n    let timeoutId = null\n    return () => {\n      clearTimeout(timeoutId)\n      timeoutId = setTimeout(fn, delay)\n    }\n  }\n\n  const throttle = (fn, delay) => {\n    let waiting = false\n    return () => {\n      if (!waiting) {\n        fn()\n        waiting = true\n        setTimeout(() => waiting = false, delay)\n      }\n    }\n  }\n\n  const reset = element => {\n    if (element.className !== element.dataset.taosClass) {\n      element.className = element.dataset.taosClass\n    }\n  }\n  const before = element => element.className = element.className.replaceAll('taos:', '')\n\n  const initElement = element => {\n    if (!element.className.includes('taos-init')) {\n      element.dataset.taosClass = element.className + ' taos-init'\n      reset(element)\n    }\n    element.className += ' !duration-[0ms] !delay-[0ms]'\n    before(element)\n\n    return {\n      element,\n      once: getComputedStyle(element)['animation-iteration-count'] === '1',\n      offset: parseInt(element.dataset.taosOffset || 0)\n    }\n  }\n\n  let elements = []\n  let innerWidth = window.innerWidth\n  let scrollY = window.scrollY\n\n  const refreshTriggers = throttle(() => {\n    elements.forEach(el => el.trigger = el.element.getBoundingClientRect().top - window.innerHeight  + el.offset + scrollY)\n  }, 250)\n\n  const refresh = () => {\n    elements = []\n    document.querySelectorAll('[class*=\"taos\"]').forEach(el => elements.push(initElement(el)))\n    refreshTriggers()\n    requestAnimationFrame(handleScroll)\n  }\n\n  const handleScroll = () => {\n    scrollY = window.scrollY\n    elements.forEach(({element, trigger, once}) => {\n      if (trigger < scrollY) {\n        reset(element)\n      }\n      else if (!once && element.className.includes('taos:')) {\n        before(element)\n      }\n    })\n    refreshTriggers()\n  }\n\n  const handleResize = () => {\n    if (innerWidth !== window.innerWidth) {\n      innerWidth = window.innerWidth\n      refresh()\n    }\n  }\n\n  refresh()\n  addEventListener('scroll', throttle(handleScroll, 32))\n  addEventListener('orientationchange', refresh)\n  addEventListener('resize', debounce(handleResize, 250))\n\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(({target}) => {\n      if (target.className && !target.className.includes('taos-init') && target.className.includes('taos:')) {\n        elements.push(initElement(target))\n      }\n    })\n  })\n  observer.observe(document, {attributes: true, childList: true, subtree: true})\n})()\n"],
  "mappings": ";CAAA,WAAA;AACE,QAQMA,IAAW,CAACC,IAAIC,OAAAA;AACpB,QAAIC,KAAAA;AACJ,WAAO,MAAA;AACAA,MAAAA,OACHF,GAAAA,GACAE,KAAAA,MACAC,WAAW,MAAMD,KAAAA,OAAiBD,EAAAA;IAAAA;EAAAA,GAKlCG,IAAQC,CAAAA,OAAAA;AACRA,IAAAA,GAAQC,cAAcD,GAAQE,QAAQC,cACxCH,GAAQC,YAAYD,GAAQE,QAAQC;EAAAA,GAGlCC,IAASJ,CAAAA,OAAWA,GAAQC,YAAYD,GAAQC,UAAUI,WAAW,SAAS,EAAA,GAE9EC,IAAcN,CAAAA,QACbA,GAAQC,UAAUM,SAAS,WAAA,MAC9BP,GAAQE,QAAQC,YAAYH,GAAQC,YAAY,cAChDF,EAAMC,EAAAA,IAERA,GAAQC,aAAa,iCACrBG,EAAOJ,EAAAA,GAEA,EACLA,SAAAA,IACAQ,MAAiE,QAA3DC,iBAAiBT,EAAAA,EAAS,2BAAA,GAChCU,QAAQC,SAASX,GAAQE,QAAQU,cAAc,CAAA,EAAA;AAInD,MAAIC,IAAW,CAAA,GACXC,IAAaC,OAAOD,YACpBE,IAAUD,OAAOC;AAErB,QAAMC,IAAkBvB,EAAS,MAAA;AAC/BmB,MAASK,QAAQC,CAAAA,OAAMA,GAAGC,UAAUD,GAAGnB,QAAQqB,sBAAAA,EAAwBC,MAAMP,OAAOQ,cAAeJ,GAAGT,SAASM,CAAAA;EAAAA,GAC9G,GAAA,GAEGQ,IAAU,MAAA;AACdX,QAAW,CAAA,GACXY,SAASC,iBAAiB,iBAAA,EAAmBR,QAAQC,CAAAA,OAAMN,EAASc,KAAKrB,EAAYa,EAAAA,CAAAA,CAAAA,GACrFF,EAAAA,GACAW,sBAAsBC,CAAAA;EAAAA,GAGlBA,IAAe,MAAA;AACnBb,QAAUD,OAAOC,SACjBH,EAASK,QAAQ,CAAA,EAAElB,SAAAA,IAASoB,SAAAA,IAASZ,MAAAA,GAAAA,MAAAA;AAC/BY,MAAAA,KAAUJ,IACZjB,EAAMC,EAAAA,IAAAA,CAEEQ,MAAQR,GAAQC,UAAUM,SAAS,OAAA,KAC3CH,EAAOJ,EAAAA;IAAAA,CAAAA,GAGXiB,EAAAA;EAAAA;AAUFO,IAAAA,GACAM,iBAAiB,UAAUpC,EAASmC,GAAc,EAAA,CAAA,GAClDC,iBAAiB,qBAAqBN,CAAAA,GACtCM,iBAAiB,UA/EA,kBAACnC,IAAIC,OAAAA;AACpB,QAAImC,KAAY;AAChB,WAAO,MAAA;AACLC,mBAAaD,EAAAA,GACbA,KAAYjC,WAAWH,IAAIC,EAAAA;IAAAA;EAAAA,GAiEV,MAAA;AACfkB,UAAeC,OAAOD,eACxBA,IAAaC,OAAOD,YACpBU,EAAAA;EAAAA,GAO8C,GAAA,CAAA,GAEjC,IAAIS,iBAAiBC,CAAAA,OAAAA;AACpCA,IAAAA,GAAUhB,QAAQ,CAAA,EAAEiB,QAAAA,GAAAA,MAAAA;AACdA,MAAAA,GAAOlC,aAAAA,CAAckC,GAAOlC,UAAUM,SAAS,WAAA,KAAgB4B,GAAOlC,UAAUM,SAAS,OAAA,KAC3FM,EAASc,KAAKrB,EAAY6B,EAAAA,CAAAA;IAAAA,CAAAA;EAAAA,CAAAA,EAIvBC,QAAQX,UAAU,EAACY,YAAAA,MAAkBC,WAAAA,MAAiBC,SAAAA,KAAS,CAAA;AAAA,EAzF1E;",
  "names": ["throttle", "fn", "delay", "waiting", "setTimeout", "reset", "element", "className", "dataset", "taosClass", "before", "replaceAll", "initElement", "includes", "once", "getComputedStyle", "offset", "parseInt", "taosOffset", "elements", "innerWidth", "window", "scrollY", "refreshTriggers", "forEach", "el", "trigger", "getBoundingClientRect", "top", "innerHeight", "refresh", "document", "querySelectorAll", "push", "requestAnimationFrame", "handleScroll", "addEventListener", "timeoutId", "clearTimeout", "MutationObserver", "mutations", "target", "observe", "attributes", "childList", "subtree"]
}
